{"metadata": {"name": "mm-gam-cm360-discrepancy-finder-duckdub", "description": "GAM vs CM360 Discrepancy Finder", "secrets": {}, "action_package_version": "0.0.2", "metadata_version": 4, "data": {"datasources": []}}, "openapi.json": {"openapi": "3.1.0", "info": {"title": "Sema4.ai Action Server", "version": "2.6.0"}, "servers": [{"url": "http://localhost:8080"}], "paths": {"/api/actions/mm-gam-cm360-discrepancy-finder-duckdub/clean-csv-data/run": {"post": {"summary": "Clean Csv Data", "description": "Load and clean CSV data using specified data types for columns.\nCleaning includes:\n    - Stripping leading/trailing whitespace\n    - Removing commas, currency symbols, and other non-numeric characters from numeric fields\n    - Converting to specified data types", "operationId": "clean_csv_data", "requestBody": {"content": {"application/json": {"schema": {"properties": {"csv_path": {"type": "string", "title": "Csv Path", "description": "File path to the input CSV file."}, "dtypes": {"additionalProperties": true, "type": "object", "title": "Dtypes", "description": "Dictionary mapping column names to desired data types."}}, "type": "object", "required": ["csv_path", "dtypes"]}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"properties": {"result": {"anyOf": [{"items": {"additionalProperties": true, "type": "object"}, "type": "array"}, {"additionalProperties": {"type": "string"}, "type": "object"}, {"type": "null"}], "title": "Result", "description": "The result for the action if it ran successfully"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error", "description": "The error message if the action failed for some reason"}}, "type": "object", "title": "Response for Clean Csv Data", "description": "Response containing the cleaned data as a list of dictionaries\nor an error dictionary."}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "x-operation-kind": "action"}}, "/api/actions/mm-gam-cm360-discrepancy-finder-duckdub/upload-reports/run": {"post": {"summary": "Upload Reports", "description": "Uploads GAM and CM360 reports into DuckDB with thread-specific tables.", "operationId": "upload_reports", "requestBody": {"content": {"application/json": {"schema": {"properties": {"gam_csv": {"type": "string", "title": "Gam Csv", "description": "GAM report filepath."}, "cm360_csv": {"type": "string", "title": "Cm360 Csv", "description": "CM360 report filepath."}, "dtypes": {"additionalProperties": true, "type": "object", "title": "Dtypes", "description": "Dictionary mapping column names to desired data types. Eg. {column_name_1: int, column_name_2: str, column_name_3: float, ...}"}}, "type": "object", "required": ["gam_csv", "cm360_csv", "dtypes"]}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"properties": {"result": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Result", "description": "The result for the action if it ran successfully"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error", "description": "The error message if the action failed for some reason"}}, "type": "object", "title": "Response for Upload Reports", "description": "Success message including table names and row counts."}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "x-operation-kind": "action"}}, "/api/actions/mm-gam-cm360-discrepancy-finder-duckdub/run-query-on-duckdb/run": {"post": {"summary": "Run Query On Duckdb", "description": "Run LLM-generated SQL query on the user's thread-specific DuckDB.", "operationId": "run_query_on_duckdb", "requestBody": {"content": {"application/json": {"schema": {"properties": {"sql_query": {"type": "string", "title": "Sql Query", "description": "SQL query to run."}}, "type": "object", "required": ["sql_query"]}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"properties": {"result": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Result", "description": "The result for the action if it ran successfully"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error", "description": "The error message if the action failed for some reason"}}, "type": "object", "title": "Response for Run Query On Duckdb", "description": "Formatted SQL result or error message."}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "x-operation-kind": "action"}}}, "components": {"schemas": {"HTTPValidationError": {"properties": {"errors": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Errors"}}, "type": "object", "title": "HTTPValidationError"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}}}}}